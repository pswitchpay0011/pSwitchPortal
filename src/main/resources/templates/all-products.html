<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>pSwitch - Welcome Retailer</title>

<link rel="shortcut icon" href="assets/images/favicon.ico" />

<div th:replace="fragment/StyleFragment :: style"></div>
</head>

<body>

	<div th:replace="fragment/topnav :: navbar"></div>

	<!-- Page content -->
	<div class="page-content">

		<div th:replace="fragment/mainSidebar :: sidebar"></div>

		<!-- Main content -->
		<div class="content-wrapper">

			<!-- Page header -->
			<div class="page-header">
				<div class="page-header-content header-elements-md-inline">
					<div class="page-title d-flex">
						<h4>
							<i class="icon-arrow-left52 mr-2"></i> <span
								th:text="${productMenu!=null ? productMenu.menuName: 'No Products found'}">No
								Product found</span>
						</h4>
						<a href="#" class="header-elements-toggle text-default d-md-none"><i
							class="icon-more"></i></a>
					</div>


				</div>
			</div>
			<!-- /page header -->


			<!-- Content area -->
			<div class="content">

				<!-- Form inputs -->
				<div class="card">


					<div class="card-body">

						<div class="row">
							<div class="col-lg-12">

								<div class="row">
									<div class="col-sm-6 col-xl-4"
										th:each="product : ${productList}">
										<div class="card min-height-300">
											<div class="card-img-actions mx-1 mt-1 doc-img-height ">
												<img class="card-img img-fluid" src="assets/images/pos.jpg"
													alt=""> <img class="card-img img-fluid"
													th:src="${(product.productImageFile != null && !#strings.isEmpty(product.productImageFile)) ? '/files/'+product.productImageFile : '/images/noImage.jpeg'}"
													th:alt="${user.firstName}">

												<!-- <div class="card-img">
													<a href="assets/images/pos.jpg"
														class="btn btn-outline bg-white text-white border-white border-2 btn-icon rounded-round"
														data-popup="lightbox" rel="group"> </a>

												</div> -->
											</div>

											<div class="card-body">
												<div class="d-flex align-items-start flex-nowrap ">
													<div>
														<h5 class="font-weight-semibold mr-2 text-primary"
															th:text="${product.productName}">POS 3930 T</h5>

														<div>
															<span style="font-size: 0.8rem;">MRP: </span>
															<!-- <i class="fas fa-rupee-sign"></i> -->
															<span><strong style="font-size: 1rem;"
																th:text="${'&#8377; '+product.MRP}">1000</strong> </span>
														</div>

														<div>
															<span style="font-size: 0.8rem;">Commission: </span> <span><strong
																style="font-size: 1rem;"
																th:text="${'&#8377; '+product.amount}" class="text-success">1000</strong> <del
																	th:if="${product.containsKey('oldAmount')}"
																	th:text="${product.containsKey('oldAmount')? product.oldAmount: ''}"
																	class="text-secondary">2000</del></span>
														</div>

														<!-- <i class="fas fa-rupee-sign"></i><span><strong
															style="font-size: 1rem;" th:text="${product.amount}">1000</strong>
															<del th:if="${product.containsKey('oldAmount')}"
																th:text="${product.containsKey('oldAmount')? product.oldAmount: ''}"
																class="text-secondary">2000</del></span>  -->

														<div>
														<br>
															<span th:text="${product.productDescription}">Lorem
																Ipsum is simply dummy text of the printing and
																typesetting industry.</span>
														</div>
													</div>

													<div class="list-icons list-icons-extended ml-auto">
														<a
															th:if="${(product.brochureFile != null && !#strings.isEmpty(product.brochureFile))}"
															th:href="${(product.brochureFile != null && !#strings.isEmpty(product.brochureFile)) ? '/files/'+product.brochureFile : '#'}"
															target="_blank" title="Download Brochure"
															class="list-icons-item"><i
															class="icon-download top-0"></i></a>
														<!-- <a
															th:if="${(product.commissionFile != null && !#strings.isEmpty(product.commissionFile))}"
															th:href="${(product.commissionFile != null && !#strings.isEmpty(product.commissionFile)) ? '/files/'+product.commissionFile : '#'}"
															target="_blank" title="Download Commission Sheet"
															class="list-icons-item"><i class="fas fa-rupee-sign"></i></a> -->
														<a href="#" data-toggle="modal" data-target="#modal_share"
															th:attr="data-id=${product.id}" target="_blank"
															title="Share Brochure"
															class="list-icons-item shareProduct"><i
															class="icon-share3 top-0"></i></a>
													</div>
												</div>
											</div>
										</div>
									</div>

								</div>
							</div>
						</div>

					</div>
				</div>
				<!-- /form inputs -->

			</div>
			<!-- /content area -->


			<!-- Footer -->
			<div class="navbar navbar-expand-lg navbar-light">
				<div class="text-center d-lg-none w-100">
					<button type="button" class="navbar-toggler dropdown-toggle"
						data-toggle="collapse" data-target="#navbar-footer">
						<i class="icon-unfold mr-2"></i> Footer
					</button>
				</div>

				<div class="navbar-collapse collapse" id="navbar-footer">
					<span class="navbar-text"> &copy; 2020. </span>

					<ul class="navbar-nav ml-lg-auto">
						<li class="nav-item"><a href="#" class="navbar-nav-link"
							target="_blank"><i class="icon-lifebuoy mr-2"></i> Support</a></li>
						<li class="nav-item"><a href="#" class="navbar-nav-link"
							target="_blank"><i class="icon-file-text2 mr-2"></i> Docs</a></li>



					</ul>

					<ul class="navbar-nav ml-lg-auto">


						<li class="nav-item"><a href="#" class="navbar-nav-link"
							target="_blank"><i class="icon-facebook color-fb "></i> </a></li>

						<li class="nav-item"><a href="#" class="navbar-nav-link"
							target="_blank"><i class="icon-twitter text-blue"></i> </a></li>

						<li class="nav-item"><a href="#" class="navbar-nav-link"
							target="_blank"><i class="icon-youtube text-red"></i> </a></li>

					</ul>
				</div>
			</div>
			<!-- /footer -->

		</div>
		<!-- /main content -->

	</div>
	<!-- /page content -->

	<div id="modal_share" class="modal fade" tabindex="-1">
		<div class="modal-dialog">
			<div class="modal-content">
				<div class="modal-header">
					<h5 class="modal-title">Share</h5>
					<button type="button" class="close" data-dismiss="modal">&times;</button>
				</div>

				<div class="modal-body">
					<div class="form-group">
						<div class="row">
							<!-- <div class="col-md-6">
								<label>Name</label> <input type="text"
									placeholder="Enter Sender Name" class="form-control">
							</div> -->

							<input type="hidden" name="productId" id="productId" value="" />

							<div class="col-md-12">
								<label>Email</label> <input type="text" name="emails"
									id="emails" placeholder="Enter Sender Email Id"
									class="form-control">
							</div>

						</div>

						<div class="row" style="margin-top: 10px;">

							<div class="col-md-6"></div>
							<div class="col-md-6 text-right">
								<button type="button" name="sendEmail" id="sendEmail"
									class="btn btn-primary">Send Email</button>
							</div>
						</div>

					</div>

					<!-- <button type="button" class="btn bg-indigo-400 btn-icon">
						<i class="icon-facebook"></i>
					</button>

					<button type="button" class="btn btn-primary btn-icon">
						<i class="icon-twitter"></i>
					</button> -->
				</div>

			</div>
		</div>
	</div>
	<script>
		$(function() {
			$(".shareProduct").click(function() {
				var my_id_value = $(this).data('id');
				$(".modal-body #productId").val(my_id_value);
			});

			$('#sendEmail').on('click', function(e) {
				//e.preventDefault();	
				var id = $("#productId").val(); //$(this).data('productId');
				var emails = $("#emails").val();//$(this).data('emails');
				$('#modal_share').modal('toggle');

				$.ajax('/service/shareProduct/' + id + "?emails=" + emails, {
					type : 'GET',
					success : function(data, status, xhr) {
						//$('p').append('status: ' + status + ', data: ' + data);
						//$('#modal_share').modal('toggle');
					},
					error : function(jqXhr, textStatus, errorMessage) {
						//$('p').append('Error' + errorMessage);
						//$('#modal_share').modal('toggle');
						alert("Error while sending email");
					}
				});

			});
		});
	</script>

</body>
</html>
