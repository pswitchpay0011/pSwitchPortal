<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport"
	content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>pSwitch - Welcome Retailer</title>

<link rel="shortcut icon" href="images/favicon.ico" />

<div th:replace="fragment/StyleFragment :: style"></div>
</head>

<body>

	<div th:replace="fragment/topnav :: navbar"></div>

	<!-- Page content -->
	<div class="page-content">

		<div th:replace="fragment/mainSidebar :: sidebar"></div>

		<!-- Main content -->
		<div class="content-wrapper">

			<!-- Page header -->
			<div class="page-header">
				<div class="page-header-content header-elements-md-inline">
					<div class="page-title d-flex">
						<h4>
							<i class="icon-arrow-down52 mr-2"></i> User Profile
						</h4>
						<a href="#" class="header-elements-toggle text-default d-md-none"><i
							class="icon-more"></i></a>
					</div>
					<div
						class="header-elements d-none text-center text-md-left mb-3 mb-md-0">
						<div class="btn-group">

							<div th:if="${mpinSet!=null && !mpinSet}">
								<button type="button" class="btn bg-warning-400 ml-3"
									data-toggle="modal" data-target="#set-mpin">
									<i class="icon-mobile mr-2"></i> Set MPIN
								</button>
							</div>
							<div th:if="${mpinSet!=null && mpinSet}">
								<button type="button" class="btn bg-warning-400 ml-3"
									data-toggle="modal" data-target="#reset-mpin">
									<i class="icon-mobile mr-2"></i> Reset MPIN
								</button>
							</div>
						</div>
					</div>
				</div>
			</div>
			<!-- /page header -->

			<!-- Content area -->
			<div class="content">

				<!-- Inner container -->
				<div class="d-md-flex align-items-md-start">

					<!-- Left sidebar component -->
					<div
						class="sidebar sidebar-light bg-transparent sidebar-component sidebar-component-left wmin-300 border-0 shadow-0 sidebar-expand-md">

						<!-- Sidebar content -->
						<div class="sidebar-content">

							<!-- Navigation -->
							<div class="card">
								<div class="card-body bg-indigo-400 text-center card-img-top"
									style="background-image: url(/images/backgrounds/panel_bg.png); background-size: contain;">
									<div class="card-img-actions d-inline-block mb-3">
										<img class="img-fluid rounded-circle"
											th:src="${(user.profilePicture != null && !#strings.isEmpty(user.profilePicture)) ? '/files/'+user.profilePicture : '/images/user.png'}"
											th:alt="${user.firstName}" width="170" height="170">
									</div>

									<h4 class="font-weight-semibold mb-0"
										th:text="${user.firstName + ' '+ user.lastName}">user</h4>
									<span class="d-block" th:text="${role.roleName}"></span>
									<span class="d-block" th:text="${'ID: '+user.userPSwitchId}"></span>

									<div class="list-icons list-icons-extended mt-2">

										<!-- Master Distributor: NA <br> MD Mobile:
                                    NA -->

										<!--<a href="#" class="list-icons-item text-white" data-popup="tooltip" title="" data-container="body" data-original-title="Google Drive"><i class="icon-google-drive"></i></a>
                                    <a href="#" class="list-icons-item text-white" data-popup="tooltip" title="" data-container="body" data-original-title="Twitter"><i class="icon-twitter"></i></a>
                                    <a href="#" class="list-icons-item text-white" data-popup="tooltip" title="" data-container="body" data-original-title="Github"><i class="icon-github"></i></a> -->
									</div>
								</div>

								<div class="card-body p-0">
									<div class="table-responsive">
										<table class="table">
											<tbody>
												<tr>
													<td>Verification Status</td>
													<td><span
														th:text="${user.isVerified ==null || user.isVerified == 0? 'Pending' : ((user.isVerified !=null && user.isVerified == 1) ? 'Verified' : 'Rejected')}"
														th:class="${user.isVerified == null || user.isVerified == 0? 'text-info' : ((user.isVerified !=null && user.isVerified == 1) ? 'text-success' : 'text-danger')}"></span></td>
												</tr>
												<div th:if="${user.parent !=null}">
													<tr>
														<td><span
															th:text="${user.parent.roles !=null? user.parent.roles.roleName: ''}"></span></td>
														<td><span
															th:text="${user.parent !=null? user.parent.firstName + ' '+ user.parent.lastName: ''}"></span></td>
													</tr>
													<tr>
														<td>Mobile No.</td>
														<td><span
															th:text="${user.parent !=null? user.parent.mobileNumber : ''}"></span></td>
													</tr>
												</div>
											</tbody>
										</table>
									</div>
								</div>

							</div>
							<!-- /navigation -->

							<!-- Latest updates -->
							<div class="card">
								<div class="card-header bg-transparent header-elements-inline">
									<span class="card-title font-weight-semibold">Latest
										updates</span>
									<div class="header-elements">
										<div class="list-icons">
											<a class="list-icons-item" data-action="collapse"></a>
										</div>
									</div>
								</div>

								<div class="card-body">
									<ul class="media-list">
										<li class="media">
											<div class="mr-3">
												<a href="#"
													class="btn bg-transparent border-primary text-primary rounded-round border-2 btn-icon">
													<i class="icon-git-pull-request"></i>
												</a>
											</div>

											<div class="media-body">
												Lorem Ipsum is simply dummy text of the printing..
												<div class="text-muted font-size-sm">4 minutes ago</div>
											</div>
										</li>

										<li class="media">
											<div class="mr-3">
												<a href="#"
													class="btn bg-transparent border-warning text-warning rounded-round border-2 btn-icon">
													<i class="icon-git-commit"></i>
												</a>
											</div>

											<div class="media-body">
												Lorem Ipsum is simply dummy text of the printing..
												<div class="text-muted font-size-sm">36 minutes ago</div>
											</div>
										</li>

										<li class="media">
											<div class="mr-3">
												<a href="#"
													class="btn bg-transparent border-info text-info rounded-round border-2 btn-icon">
													<i class="icon-git-branch"></i>
												</a>
											</div>

											<div class="media-body">
												Lorem Ipsum is simply dummy text of the printing..
												<div class="text-muted font-size-sm">2 hours ago</div>
											</div>
										</li>
									</ul>
								</div>
							</div>
							<!-- /latest updates -->

						</div>
						<!-- /sidebar content -->

					</div>
					<!-- /left sidebar component -->


					<!-- Right content -->
					<div class="tab-content w-100">
						<div class="tab-pane fade active show" id="">

							<form action="#" th:action="@{/user/updateProfileInfo}"
								method="post" enctype="multipart/form-data">
								<!-- Profile info -->
								<div class="card">
									<div class="card-header header-elements-inline">
										<h5 class="card-title">Profile information</h5>
										<div class="header-elements">
											<div class="list-icons">
												<a class="list-icons-item" data-action="collapse"></a>
											</div>
										</div>
									</div>

									<div class="card-body">

										<div th:if="${updateMessage}" class="alert alert-success"
											role="alert">
											<p th:text="${updateMessage}"></p>
										</div>

										<div th:if="${updateError}" class="alert alert-danger"
											role="alert">
											<table>
												<tr th:each="error : ${updateError}">
													<td class="text-left" th:text="${'* '+ error}">data</td>
												</tr>
											</table>
										</div>
										<div class="form-group">
											<div class="row">
												<div class="col-md-6">
													<label>First Name</label> <input type="text"
																					 th:value="${user.firstName}" id="firstName"
																					 name="firstName" class="form-control">
												</div>
												<div class="col-md-6">
													<label>Last Name</label> <input type="text"
																					th:value="${user.lastName}" id="lastName" name="lastName"
																					class="form-control">
												</div>
											</div>
										</div>

										<div class="form-group">
											<div class="row">
												<div class="col-md-6">
													<label>Company Name</label> <input type="text"
																					 th:value="${user.companyName}" id="companyName"
																					 name="companyName" class="form-control">
												</div>
												<div class="col-md-6">
													<label>GST No.</label>
													<input type="text" th:value="${user.gstNo}" id="gstNo" name="gstNo"
														   class="form-control">
												</div>
											</div>
										</div>

										<div class="form-group">
											<div class="row">
												<div class="col-md-6">
													<label>Address line 1</label> <input type="text"
														th:value="${user.address}" id="address" name="address"
														class="form-control">
												</div>
												<div class="col-md-6">
													<label>Address line 2</label> <input type="text" value=""
														class="form-control">
												</div>
											</div>
										</div>

										<div class="form-group">
											<div class="row">
												<div class="col-md-6">
													<label>Email</label> <input type="text"
														th:value="${user.username}" id="username" name="username"
														class="form-control">
												</div>
												<div class="col-md-6">
													<label>Country</label> <select class="form-control"
														required="required" th:field="*{user.country}"
														name="country" id="country">
														<option th:each="item : ${countries}"
															th:value="${item.id}" th:text="${item.name}" />
													</select>
												</div>
											</div>
										</div>

										<input type="hidden" id="userId" name="userId"
											th:value="${user.userId}"> <input type="hidden"
											id="selectedCountry" name="selectedCountry"
											th:value="${user.country}"> <input type="hidden"
											id="selectedState" name="selectedState"
											th:value="${user.state}"> <input type="hidden"
											id="selectedCity" name="selectedCity" th:value="${user.city}">


										<div class="form-group">
											<div class="row">
												<div class="col-md-4">
													<label>State/Province</label> <select class="form-control"
														th:field="*{user.state}" name="state" id="state"
														required="required">
														<option th:each="item : ${states}" th:value="${item.id}"
															th:text="${item.name}" />
													</select>
												</div>
												<div class="col-md-4">
													<label>City</label> <select class="form-control"
														th:field="*{user.city}" name="city" id="city"
														required="required">
														<option th:each="item : ${cities}" th:value="${item.id}"
															th:text="${item.name}" />
													</select>
												</div>
												<div class="col-md-4">
													<label>ZIP code</label> <input type="text"
														th:value="${user.zipcode}" id="zipcode" name="zipcode"
														class="form-control">
												</div>
											</div>
										</div>

										<div class="form-group">
											<div class="row">
												<div class="col-md-6">
													<label>Phone #</label> <input type="text"
														th:value="${user.mobileNumber}" id="mobileNumber"
														name="mobileNumber" class="form-control"> <a
														th:if="${user.contactVerified == 0 || user.contactVerified == null }"
														href="#" onClick="verifyContact();">Verify Contact</a> <span
														class="text-success" th:if="${user.contactVerified == 1}">Contact
														Verified </span>
													<!-- <span
														class="form-text text-muted">+99-99-9999-9999</span> -->
												</div>

												<div class="col-md-6">
													<label>Upload profile image</label> <input accept="image/*"
														type="file" name="imgProfile" id="imgProfile"
														class="form-input-styled"> <span
														class="form-text text-muted">Accepted formats: gif,
														png, jpg. Max file size 2Mb</span>
												</div>
											</div>
										</div>
										<div class="text-right">
											<button type="submit" class="btn btn-primary">Save
												changes</button>
										</div>
									</div>
								</div>
							</form>
							<!-- /profile info -->

							<!-- Bank Details -->
							<div class="card">
								<div class="card-header header-elements-inline">
									<h5 class="card-title">Bank Details</h5>
									<div class="header-elements">
										<div class="list-icons">
											<a class="list-icons-item" data-action="collapse"></a>
										</div>
									</div>
								</div>

								<div class="card-body">
									<form action="#" method="post"
										th:action="@{/user/updateUserBankDetails}">
										<input type="hidden" id="userId" name="userId"
											th:value="${user.userId}">
										<div class="form-group">
											<div class="row">
												<div class="col-md-6">
													<label>Account Holder Name</label> <input type="text"
														th:value="${(user.bankDetails != null && !#strings.isEmpty(user.bankDetails.accountHolderName)) ? user.bankDetails.accountHolderName : ''}"
														value="" id="accountHolderName" name="accountHolderName"
														class="form-control">
												</div>

												<div class="col-md-6">
													<label>Bank Name</label> <input type="text"
														th:value="${(user.bankDetails != null && !#strings.isEmpty(user.bankDetails.bankName)) ? user.bankDetails.bankName : ''}"
														name="BANK_NAME" value="ICICI" class="form-control">
												</div>
											</div>
										</div>

										<div class="form-group">
											<div class="row">
												<div class="col-md-6">
													<label>Account Number</label> <input type="text"
														th:value="${(user.bankDetails != null && !#strings.isEmpty(user.bankDetails.AccountNumber)) ? user.bankDetails.AccountNumber : ''}"
														placeholder="11765432010258" id="AccountNumber"
														, name="AccountNumber" class="form-control">
												</div>

												<div class="col-md-6">
													<label>IFSC Code</label> <input type="text"
														th:value="${(user.bankDetails != null && !#strings.isEmpty(user.bankDetails.ifscCode)) ? user.bankDetails.ifscCode : ''}"
														placeholder="ICIC0003" id="IFSC_CODE" name="IFSC_CODE"
														class="form-control">
												</div>
											</div>
										</div>

										<div class="text-right">
											<button type="submit" class="btn btn-primary">Save
												changes</button>
										</div>

									</form>
								</div>
							</div>
							<!-- Bank Details -->

							<!-- Account settings -->
							<form th:action="@{/user/updateProfilePassword}" method="post">
								<div class="card">
									<div class="card-header header-elements-inline">
										<h5 class="card-title">Account settings</h5>
										<div class="header-elements">
											<div class="list-icons">
												<a class="list-icons-item" data-action="collapse"></a>
											</div>
										</div>
									</div>

									<input type="hidden" id="userId" name="userId"
										th:value="${user.userId}">

									<div class="card-body">
										<div class="form-group">
											<div class="row">
												<div class="col-md-6">
													<label>Username</label> <input type="text"
														readonly="readonly" th:value="${user.userPSwitchId}"
														id="userPSwitchId" name="userPSwitchId"
														class="form-control">
												</div>

												<div class="col-md-6">
													<label>OTP</label>
													<div class="input-group">
														<input type="number" id="pwd_otp" name="pwd_otp"
															required="required" class="form-control">
														<div class="input-group-append">
															<button class="btn btn-warning" type="button"
																onclick="generatePasswordOTP();">Send OTP</button>
														</div>
													</div>
													<!-- <button type="button" onclick="generatePasswordOTP();"
															class="btn btn-primary">Generate OTP</button> -->

												</div>

												<!-- <div class="col-md-6">
													<label>Current password</label> <input type="password"
														value="password" readonly="readonly" class="form-control">
												</div> -->
											</div>
										</div>

										<div class="form-group">
											<div class="row">
												<div class="col-md-6">
													<label>New password</label> <input type="password"
														id="newPassword" name="newPassword"
														placeholder="Enter new password" class="form-control">
												</div>

												<div class="col-md-6">
													<label>Repeat password</label> <input type="password"
														id="confirmPassword" name="confirmPassword"
														placeholder="Repeat new password" class="form-control">
												</div>
											</div>
										</div>
										<div class="text-right">
											<button type="submit" class="btn btn-primary">Save
												changes</button>
										</div>
									</div>

								</div>
							</form>
							<!-- /account settings -->

							<!-- Documents -->
							<div class="card">
								<div class="card-header header-elements-inline">
									<h5 class="card-title">Documents</h5>
									<div class="header-elements">
										<div class="list-icons">
											<button type="button" class="btn btn-success"
												data-toggle="modal" data-target="#upload_document">
												Add Document <i class="icon-add ml-2"></i>
											</button>
											<a class="list-icons-item" data-action="collapse"></a>
										</div>
									</div>
								</div>


								<div class="card-body">
									<div class="form-group row">
										<div class="col-lg-12">

											<div class="row" id="gallery" data-toggle="modal"
												data-target="#exampleModal">
												<div class="col-sm-6 col-xl-3"
													th:each="attachment,iter : ${user.attachments}"
													th:if="${user.attachments != null}">
													<div class="card min-height-300">
														<div class="card-img-actions mx-1 mt-1 doc-img-height ">
															<img class="card-img img-fluid"
																th:src="${(attachment.file != null && !#strings.isEmpty(attachment.file)) ? '/files/'+attachment.file : '/images/user.png'}"
																th:alt="${user.firstName}" width="170" height="170"
																data-target="#carouselExample"
																th:data-slide-to="${iter.index}">
															<!-- <div class="card-img-actions-overlay card-img">
																<a href="assets/images/adhaar.jpg"
																	class="btn btn-outline bg-white text-white border-white border-2 btn-icon rounded-round"
																	data-popup="lightbox" rel="group"> <i
																	class="icon-enlarge"></i>
																</a>
															</div> -->
														</div>

														<div class="card-body">
															<div class="d-flex align-items-start flex-nowrap ">
																<div>
																	<h6 class="font-weight-semibold mr-2"
																		th:text="${attachment.documentType}"></h6>
																	<h6 class="font-weight-semibold mr-2"
																		th:text="${attachment.documentNumber}">5485 5000
																		8000</h6>
																	<p>
																		Verification : <span th:text="${attachment.status}"></span>
																	</p>
																	<hr>
																	<span class="text-danger"
																		th:text="${attachment.documentDescription}">Lorem
																		Ipsum is simply dummy text of the printing and
																		typesetting industry.</span>
																</div>

																<div class="list-icons list-icons-extended ml-auto">
																	<a
																		th:href="${(attachment.file != null && !#strings.isEmpty(attachment.file)) ? '/files/'+attachment.file : '/images/user.png'}"
																		target="_blank" class="list-icons-item"><i
																		class="icon-download top-0"></i></a> <a
																		th:if="${user.isVerified != 1}"
																		th:href="${(attachment.id != null && !#strings.isEmpty(attachment.id)) ? '/user/deleteDocument/'+attachment.id : '#'}"
																		class="list-icons-item"><i
																		class="icon-trash top-0"></i></a>
																</div>
															</div>
														</div>
													</div>
												</div>
											</div>
										</div>
									</div>
								</div>
							</div>
							<!-- /Documents -->

							<!-- Profile info -->
							<!-- <form th:action="@{/user/updateProfileDocument}" method="post"
								enctype="multipart/form-data">
								<div class="card">
									<div class="card-header header-elements-inline">
										<h5 class="card-title">Documents</h5>
										<div class="header-elements">
											<div class="list-icons">
												<a class="list-icons-item" data-action="collapse"></a>
											</div>
										</div>
									</div>
									<input type="hidden" id="userId" name="userId"
										th:value="${user.userId}">
									<div class="card-body">
										<div class="form-group">
											<div class="row">
												<div class="col-md-3">
													<img
														th:src="${(user.pancardPic != null && !#strings.isEmpty(user.pancardPic)) ? '/files/'+user.pancardPic : '/images/pan-card.jpg'}"
														th:alt="${user.aadhaarCardPic}" src="images/pan-card.jpg"
														alt="" class="img-fluid">

												</div>
												<div class="col-md-3">
													<label>Pan Card Number</label> <input type="text"
														required="required" value="125487952036984"
														th:value="${user.pancardNumber}" id="pancardNumber"
														name="pancardNumber" class="form-control">

												</div>
												<div class="col-md-6">
													<label>Update Pan Card Image</label> <input
														accept="image/*" type="file" id="imgPancard"
														name="imgPancard" class="form-input-styled"> <span
														class="form-text text-muted">Accepted formats: gif,
														png, jpg. Max file size 2Mb</span>
												</div>


											</div>
										</div>

										<div class="form-group">
											<div class="row">
												<div class="col-md-3">
													<img
														th:src="${(user.aadhaarCardPic != null && !#strings.isEmpty(user.aadhaarCardPic)) ? '/files/'+user.aadhaarCardPic : '/images/adhaar-img.jpg'}"
														th:alt="${user.aadhaarCardPic}"
														src="/images/adhaar-img.jpg" alt="" class="img-fluid">

												</div>
												<div class="col-md-3">
													<label>Adhaar Card Number</label> <input type="text"
														required="required" value="125487952036984"
														th:value="${user.aadhaarNumber}" id="aadhaarNumber"
														name="aadhaarNumber" class="form-control">

												</div>
												<div class="col-md-6">
													<label>Update Adhaar Card Image</label> <input
														accept="image/*" type="file" id="imgAadhaarCard"
														name="imgAadhaarCard" class="form-input-styled"> <span
														class="form-text text-muted">Accepted formats: gif,
														png, jpg. Max file size 2Mb</span>
												</div>
											</div>

										</div>
										<div class="text-right">
											<button type="submit" class="btn btn-primary">Save
												changes</button>
										</div>
									</div>
								</div>
							</form> -->
							<!-- /profile info -->

							<form th:action="@{/user/sendForApproval}" method="post">

								<!-- Profile info -->
								<div class="card">
									<div class="card-body">
										<div class="row">

											<div class="col-md-2">
												<button type="button" class="btn btn-danger"
													data-toggle="modal" data-target="#termsAndAggrement">Agreement
												</button>
											</div>

											<input type="hidden" id="userId" name="userId"
												th:value="${user.userId}">

											<div class="col-md-7">
												<div class="custom-control custom-checkbox">
													<input type="checkbox" class="custom-control-input"
														id="custom_checkbox_stacked_unchecked" required="required">
													<label class="custom-control-label text-red"
														for="custom_checkbox_stacked_unchecked">I
														acknowledge that i will follow and agree to terms and
														conditions</label>
												</div>

											</div>

											<div class="col-md-3 text-right">
												<button type="submit" class="btn btn-primary">Send
													for Approval</button>
												<!-- <a th:href="@{/index}" class="btn btn-primary">Cancel</a> -->
											</div>
										</div>
									</div>
								</div>
								<!-- /profile info -->
							</form>
						</div>

						<div class="tab-pane fade" id="schedule">

							<!-- Available hours -->
							<div class="card">
								<div class="card-header header-elements-inline">
									<h6 class="card-title">Available hours</h6>
									<div class="header-elements">
										<div class="list-icons">
											<a class="list-icons-item" data-action="collapse"></a> <a
												class="list-icons-item" data-action="reload"></a> <a
												class="list-icons-item" data-action="remove"></a>
										</div>
									</div>
								</div>

								<div class="card-body">
									<div class="chart-container">
										<div class="chart has-fixed-height" id="available_hours"></div>
									</div>
								</div>
							</div>
							<!-- /available hours -->


							<!-- Schedule -->
							<div class="card">
								<div class="card-header header-elements-inline">
									<h5 class="card-title">My schedule</h5>
									<div class="header-elements">
										<div class="list-icons">
											<a class="list-icons-item" data-action="collapse"></a> <a
												class="list-icons-item" data-action="reload"></a> <a
												class="list-icons-item" data-action="remove"></a>
										</div>
									</div>
								</div>

								<div class="card-body">
									<div class="my-schedule"></div>
								</div>
							</div>
							<!-- /schedule -->

						</div>


						<div class="tab-pane fade" id="orders"></div>
						<!-- /right content -->

					</div>
					<!-- /inner container -->

				</div>
				<!-- /content area -->


			</div>
			<!-- /main content -->

			<!-- Footer -->
			<div class="navbar navbar-expand-lg navbar-light">
				<div class="text-center d-lg-none w-100">
					<button type="button" class="navbar-toggler dropdown-toggle"
						data-toggle="collapse" data-target="#navbar-footer">
						<i class="icon-unfold mr-2"></i> Footer
					</button>
				</div>

				<div class="navbar-collapse collapse" id="navbar-footer">
					<span class="navbar-text"> &copy; 2020. </span>

					<ul class="navbar-nav ml-lg-auto">
						<li class="nav-item"><a href="#" class="navbar-nav-link"
							target="_blank"><i class="icon-lifebuoy mr-2"></i> Support</a></li>
						<li class="nav-item"><a href="#" class="navbar-nav-link"
							target="_blank"><i class="icon-file-text2 mr-2"></i> Docs</a></li>


					</ul>

					<ul class="navbar-nav ml-lg-auto">


						<li class="nav-item"><a href="#" class="navbar-nav-link"
							target="_blank"><i class="icon-facebook color-fb "></i> </a></li>

						<li class="nav-item"><a href="#" class="navbar-nav-link"
							target="_blank"><i class="icon-twitter text-blue"></i> </a></li>

						<li class="nav-item"><a href="#" class="navbar-nav-link"
							target="_blank"><i class="icon-youtube text-red"></i> </a></li>

					</ul>
				</div>
			</div>
			<!-- /footer -->

		</div>
		<!-- /page content -->

		<!-- Basic modal -->
		<div th:replace="fragment/terms :: termsAndAggrement"></div>
		<!-- /basic modal -->


		<!-- Attachment modal -->
		<div id="upload_document" class="modal fade" tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Upload Document</h5>
						<button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>

					<div class="modal-body">
						<form th:action="@{/user/updateAttachment}" method="post"
							enctype="multipart/form-data">

							<input type="hidden" id="userId" name="userId"
								th:value="${user.userId}">

							<div class="form-group row">
								<label class="col-lg-3 col-form-label">Document Type:</label>
								<div class="col-lg-9">
									<select required="required" name="documentType"
										id="documentType" class="form-control form-control-select2">
										<option value="">Select Document</option>
										<option value="OTHER">Other Document</option>
										<option value="AADHAAR">Aadhaar Card</option>
										<option value="PANCARD">PAN Card</option>
										<option value="VOTERID">Voter ID</option>
										<option value="DRIVINGLICENCE">Driving Licence</option>
									</select>
								</div>
							</div>

							<div class="form-group row">
								<label class="col-lg-3 col-form-label">Document Number:</label>
								<div class="col-lg-9">
									<input type="text" name="documentNumber" id="documentNumber"
										class="form-control"
										placeholder="Enter Above Selected Document Number">
								</div>
							</div>



							<div class="form-group row">
								<label class="col-lg-3 col-form-label">Upload Document:</label>
								<div class="col-lg-9">
									<input id="imgDocument" name="imgDocument" accept="image/*"
										type="file" class="form-input-styled" data-fouc> <span
										class="form-text text-muted">Accepted formats: gif,
										png, jpg. Max file size 2Mb</span>
								</div>
							</div>

							<div class="text-right">
								<button type="submit" class="btn btn-primary">
									Submit <i class="icon-paperplane ml-2"></i>
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
		<!-- Attachment modal -->

		<!-- Attachment modal -->
		<div id="verify_modal" class="modal fade" tabindex="-1">
			<div class="modal-dialog">
				<div class="modal-content">
					<div class="modal-header">
						<h5 class="modal-title">Verify Mobile No.</h5>
						<button type="button" class="close" data-dismiss="modal">&times;</button>
					</div>

					<div class="modal-body">
						<form th:action="@{/user/verifyContactNo}" method="post"
							enctype="multipart/form-data">

							<input type="hidden" id="userId" name="userId"
								th:value="${user.userId}">

							<div class="form-group row">
								<label class="col-lg-3 col-form-label">OTP:</label>
								<div class="col-lg-9">
									<input type="text" name="otp" id="otp" class="form-control"
										placeholder="Enter Generated OTP">
								</div>
							</div>

							<div class="text-right">
								<button type="submit" class="btn btn-primary">
									Submit <i class="icon-paperplane ml-2"></i>
								</button>
							</div>
						</form>
					</div>
				</div>
			</div>
		</div>
		<!-- Attachment modal -->


		<!-- Custom Styling Toggle. For demo purposes only. -->
		<!-- <div class="switch-wrap">
			<label class="switch"> <input type="checkbox"
				id="styleSwitch" onclick="switchStyle();"> <span
				class="slider round"></span>
			</label> <span class="switch-text">Toggle between <em>Bootstrap
					defaults</em> and <em>custom styling</em>.
			</span>
		</div> -->
		<div th:if="${!mpinSet}">

			<div id="set-mpin" class="modal fade" tabindex="-1">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title">SET MPIN</h5>
							<button type="button" class="close" data-dismiss="modal">&times;</button>
						</div>

						<div class="modal-body">
							<form th:action="@{/user/setMPIN}" method="post">

								<div class="form-group row">
									<label class="col-form-label col-lg-4">New PIN <span
										class="text-red">*</span></label>
									<div class="col-lg-8">
										<input type="number" maxlength="6" min="6" name="mpin"
											class="form-control">
									</div>
								</div>

								<div class="form-group row">
									<label class="col-form-label col-lg-4">OTP <span
										class="text-red">*</span></label>
									<div class="col-lg-8">
										<div class="input-group">
											<input type="number" id="mpin_otp" name="mpin_otp"
												required="required" class="form-control">
											<div class="input-group-append">
												<button class="btn btn-warning" type="button"
													onclick="generateMPINOTP();">Request OTP</button>
											</div>
										</div>
									</div>
								</div>

								<div class="text-right">
									<button type="submit" class="btn btn-primary">
										Submit <i class="icon-paperplane ml-2"></i>
									</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>

		</div>
		<div id="reset-mpin" class="modal fade" tabindex="-1">
				<div class="modal-dialog">
					<div class="modal-content">
						<div class="modal-header">
							<h5 class="modal-title">SET MPIN</h5>
							<button type="button" class="close" data-dismiss="modal">&times;</button>
						</div>

						<div class="modal-body">
							<form th:action="@{/user/resetMPIN}" method="post">

								<div class="form-group row">
									<label class="col-form-label col-lg-4">OLD PIN <span
										class="text-red">*</span></label>
									<div class="col-lg-8">
										<input type="number" maxlength="6" min="6" name="old_mpin"
											class="form-control">
									</div>
								</div>
								
								<div class="form-group row">
									<label class="col-form-label col-lg-4">New PIN <span
										class="text-red">*</span></label>
									<div class="col-lg-8">
										<input type="number" maxlength="6" min="6" name="mpin"
											class="form-control">
									</div>
								</div>

								<div class="form-group row">
									<label class="col-form-label col-lg-4">OTP <span
										class="text-red">*</span></label>
									<div class="col-lg-8">
										<div class="input-group">
											<input type="number" id="mpin_otp" name="mpin_otp"
												required="required" class="form-control">
											<div class="input-group-append">
												<button class="btn btn-warning" type="button"
													onclick="generateMPINOTP();">Request OTP</button>
											</div>
										</div>
									</div>
								</div>

								<div class="text-right">
									<button type="submit" class="btn btn-primary">
										Submit <i class="icon-paperplane ml-2"></i>
									</button>
								</div>
							</form>
						</div>
					</div>
				</div>
			</div>

		<div class="modal fade" id="exampleModal" tabindex="-1" role="dialog"
			aria-hidden="true">
			<div class="modal-dialog" role="document">
				<div class="modal-content">
					<div class="modal-header">
						<button type="button" class="close" data-dismiss="modal"
							aria-label="Close">
							<span aria-hidden="true">&times;</span>
						</button>
					</div>
					<div class="modal-body">
						<div id="carouselExample" class="carousel slide"
							data-ride="carousel">
							<ol class="carousel-indicators">
								<li th:each="attachment,iter : ${user.attachments}"
									data-target="#carouselExample"
									th:classappend="${iter.index == 0} ? active : '' "
									th:data-slide-to="${iter.index}"></li>
								<!-- <li data-target="#carouselExample" data-slide-to="1"></li>
								<li data-target="#carouselExample" data-slide-to="2"></li>
								<li data-target="#carouselExample" data-slide-to="3"></li> -->
							</ol>
							<div class="carousel-inner">
								<div class="carousel-item"
									th:each="attachment,iter : ${user.attachments}"
									th:classappend="${iter.index == 0} ? active : '' ">
									<img class="d-block w-100"
										th:src="${(attachment.file != null && !#strings.isEmpty(attachment.file)) ? '/files/'+attachment.file : '/images/user.png'}"
										th:alt="${attachment.file}">
								</div>
							</div>
							<a class="carousel-control-prev" href="#carouselExample"
								role="button" data-slide="prev"> <span
								class="carousel-control-prev-icon" aria-hidden="true"></span> <span
								class="sr-only">Previous</span>
							</a> <a class="carousel-control-next" href="#carouselExample"
								role="button" data-slide="next"> <span
								class="carousel-control-next-icon" aria-hidden="true"></span> <span
								class="sr-only">Next</span>
							</a>
						</div>
					</div>
					<div class="modal-footer">
						<button type="button" class="btn btn-secondary"
							data-dismiss="modal">Close</button>
					</div>
				</div>
			</div>
		</div>
	</div>
	<script src="/js/ps/dropdown.js"></script>
	<script>
		function verifyContact() {
			$.ajax({
				url : "/user/generateOTP",
				success : function(result) {
					if (result === "success") {
						$("#verify_modal").modal();
					}
				}
			});
		}

		function generatePasswordOTP() {
			$.ajax({
				url : "/user/generatePasswordOTP",
				success : function(result) {
					/* if (result === "success") {
						$("#verify_modal").modal();
					} */
				}
			});
		}

		function generateMPINOTP() {
			$.ajax({
				url : "/user/generateMPINOTP",
				success : function(result) {
					alert(result);
					/* if (result === "success") {
						$("#verify_modal").modal();
					} */
				}
			});
		}

		function switchStyle() {
			if (document.getElementById('styleSwitch').checked) {
				document.getElementById('gallery').classList.add("custom");
				document.getElementById('exampleModal').classList.add("custom");
			} else {
				document.getElementById('gallery').classList.remove("custom");
				document.getElementById('exampleModal').classList
						.remove("custom");
			}
		}
	</script>
</body>
</html>
